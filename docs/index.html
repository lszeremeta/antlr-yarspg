<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>YARS-PG 3.7</title>
    <script async class='remove' src='https://www.w3.org/Tools/respec/respec-w3c'></script>
    <script class='remove'>
        var respecConfig = {
            specStatus: "unofficial",
            editors: [
                {
                    name: "ﾅ「kasz Szeremeta",
                    company: "University of Bialystok",
                    companyURL: "http://uwb.edu.pl",
                    mailto: "l.szeremeta@uwb.edu.pl",
                },
                {
                    name: "Dominik Tomaszuk",
                    company: "University of Bialystok",
                    companyURL: "http://uwb.edu.pl",
                    mailto: "d.tomaszuk@uwb.edu.pl",
                },
                {
                    name: "Renzo Angles",
                    company: "Universidad de Talca and Fundational Reasearch on Data",
                    companyURL: "https://www.utalca.cl",
                    mailto: "rangles@utalca.cl",
                }],
            github: {
                repoURL: "https://github.com/lszeremeta/yarspg",
                branch: "master",
            },
            shortName: "yarspg",
        };
    </script>
</head>
<body>
<section id='abstract'>
    <p>
        The YARS-PG serialization was designed to be simple, extensible and platform independent, and to support all the
        features provided by the current database systems based on the property graph data model.
    </p>
</section>
<section id='sotd'>
    <p>
        This is very early draft of YARS-PG specification based on YARS-PG 3.0.
    </p>
</section>
<section id='introduction' class="informative">
    <h2>Introduction</h2>
    <p>This document defines YARS-PG, a serialization for property graphs.</p>
    <aside class="example" title="Bibliographic information">
        <p>The example presents a graphical representation of a property graph that contains bibliographic information.
        <pre>
# Prefix declaration
:foaf: &lt;http://xmlns.com/foaf/0.1/&gt;

# Metadata
-foaf:maker: "ﾅ「kasz Szeremeta and Dominik Tomaszuk"

# Nodes
<"Author01">{"Author"}["fname": "John", "lname": "Smith"] #Author01
<"EI01">{"Entry", "InProc"}["title": "Serialization for...", "numpages": 10, "keyword": "Graph database"]

# Edges
("EI01")-{"has_author"}["order": 1]->("Author01")
  </pre>
    </aside>
    <p>The YARS-PG serialization supports all the features allowed by the current database systems based on the property
        graph data model, and can be adapted to work with various visualization software, database-driven systems and
        other graph-oriented tools.</p>
</section>
<section id='yarspg-language'>
    <h2>YARS-PG Language</h2>
    <section id='directives'>
        <h2>Directives</h2>
        <p>The YARS-PG serialization contains node declarations and relationship declaration (no order is required for
            them).</p>
    </section>
    <section id='prefixes'>
        <h2>Prefixes</h2>
        <p>A <dfn>prefix declaration</dfn> associates a prefix label with an IRI.</p>
        <aside class="example" title="Prefix declaration">
            <p>The example presents prefix declaration for <code>foaf</code>.
            <pre>
:foaf: &lt;http://xmlns.com/foaf/0.1/&gt;
  </pre>
        </aside>
    </section>
    <section id='metadata'>
        <h2>Metadata</h2>
        <p>A <dfn>metadata declaration</dfn> represents a collection of metadata for the document.</p>
        <aside class="example" title="Metadata declaration">
            <p>The example presents metadata declaration with <code>foaf:maker</code>.
            <pre>
-foaf:maker: "ﾅ「kasz Szeremeta and Dominik Tomaszuk"
  </pre>
        </aside>
    </section>
    <section id='nodes'>
        <h2>Nodes</h2>
        <p>A <dfn>node declaration</dfn> begins with the node identifier, followed by a list of node labels and optional
            properties of the node.</p>
        <aside class="example" title="Node declaration">
            <p>The example presents node declaration for node <code>EI01</code>. This node have two labels
                (<code>Entry</code> and <code>InProc</code>)
                and three properties (<code>title</code>, <code>numpages</code> and <code>keyword</code>).
            <pre>
<"EI01">{"Entry","InProc"}["title":"Serialization for...", "numpages":10,"keyword":"Graph database"]
  </pre>
        </aside>
    </section>
    <section id='edges'>
        <h2>Edges</h2>
        <p>A <dfn>relationship declaration</dfn> begins with the source node identifier, followed by relationship
            identifier
            (optional), a label, a set of properties (optional) and target node identifier. Relationships can be
            directed (<code>-></code>) or undirected (<code>-</code>).</p>
        <aside class="example" title='Edge declaration'>
            <p>The example presents edge declaration from source node <code>EI01</code> to target node
                <code>Author01</code>. Relationship
                have label <code>has_author</code> and one property (<code>order</code>).
            <pre>
("EI01")-{"has_author"}["order":1]->("Author01")
  </pre>
        </aside>
    </section>
    <section id='properties'>
        <h2>Properties</h2>
        A <dfn>property</dfn> is represented as a pair <code>p:v</code>, where <code>p</code> is the property label and <code>v</code> the property value. A
        property value could be atomic (e.g. String, Integer, Float, Null, Boolean) or complex (i.e. a list of atomic values).</p>
    </section>
    <section id='annotations'>
        <h2>Annotations</h2>
        An <dfn>annotation</dfn> is represented as a pair <code>k:v</code>, where <code>k</code> is the key (that can be a string or QName) and <code>v</code> the value of attribute.</p>
        <aside class="example" title="Annotation declaration">
            <p>The example presents node declaration for node and annotation.</p>
            <pre>
<"b43b">{"label1"}["value":5]+foaf:maker: "ﾅ「kasz Szeremeta and Dominik Tomaszuk"
  </pre>
        </aside>
        <section id='namedgraphs' class="informative">
           <h3>Named Property Graphs</h3>
           A Named Property Graph can be represented as an annotation with <code>graph</code> key.
            <aside class="example" title="Annotation declaration">
              <p>The example presents node declaration and property graph name.</p>
              <pre>
<"z">{"b432f"}["multiset": {"name", "title"}]+"graph": "family"
  </pre>
            </aside>
      </section>
    </section>
</section>
<section id='yarspg-language'>
    <h2>YARS-PG Schema Language</h2>
    <section id='snodes'>
        <h2>Nodes</h2>
        <p>A <dfn>node schema declaration</dfn> begins with list of node labels, followed by optional properties of the node.</p>
        <aside class="example" title="Node schema declaration">
            <p>The example presents node schema declaration.</p>
            <pre>
S{"Author"}["fname": String, "lname": String]
S{"Entry", "InProc"}["title": String, "numpages": Number, "keyword": String]
S{"Entry", "Article"}["title": String, "numpages": Number, "keyword": List(String)]
S{"Proceedings"}["title": String, "year": Number, "month": String]
S{"Journal"}["title": String, "year": Number, "vol": Number]
  </pre>
        </aside>
    </section>
    <section id='sedges'>
        <h2>Edges</h2>
        <p>A <dfn>relationship schema declaration</dfn> begins with the node label, followed by a label,
            a set of properties (optional) and target node identifier. Relationships schema can be
            directed (<code>-></code>) or undirected (<code>-</code>).</p>
        <aside class="example" title="Edge schema declaration">
            <p>The example presents edge schema declaration.</p>
            <pre>
S("Entry")-{"has_author"}["order": Number]->("Author")
S("Entry")-{"cities"}->("Entry")
S("InProc")-{"booktitle"}["pages": String]->("Proceedings")
S("Article")-{"published_in"}["pages": String]->("Journal")
  </pre>
        </aside>
    </section>
    <section id='datatypes'>
        <h2>Datatypes</h2>
        <p>A <dfn></dfn></p>
        <section id='pdatatype'>
           <h3>Primitive datatypes</h3>
           <p></p>
      </section>
        <section id='cdatatype'>
           <h3>Complex datatypes</h3>
           <p></p>
      </section>
    </section>
</section>
<section class="informative" id='examples'>
    <h2>Examples</h2>
</section>
<section id='yarspg-grammar'>
    <h2>YARS-PG Grammar</h2>
    <p>YARS-PG grammar in [[EBNF-NOTATION]] is presented below.</p>

    <pre>
yarspg   ::= statement+ EOF
statement
         ::= node
           | edge
           | prefix_directive
           | metadata
           | node_schema
           | edge_schema
prefix_directive
         ::= pname IRI
pname    ::= ':' ALNUM_PLUS ':'
pn_local ::= ALNUM_PLUS
metadata ::= '-' ( pn_local pname STRING | IRI ':' ( STRING | IRI ) )
annotation
         ::= named_graph_annotation
           | string_annotation
           | rdf_annotation
named_graph_annotation
         ::= '"graph"' ':' STRING
string_annotation
         ::= STRING ':' STRING
rdf_annotation
         ::= ( pn_local pname | IRI ':' ) ( STRING | IRI )
node
         ::= '<' node_id '>' ( '{' node_label ( ',' node_label )+ '}' )? ( '[' prop ( ',' prop )+ ']' )? ( '+' annotation ( ',' annotation )+ )?
edge
         ::= directed
           | undirected
directed ::= '(' node_id ')' '-' ('<' edge_id '>')? '{' edge_label '}' ( '[' prop ( ',' prop )+ ']' )? '->' '(' node_id ')' ( '+' annotation ( ',' annotation )+ )?
undirected
         ::= '(' node_id ')' '-' ('<' edge_id '>')? '{' edge_label '}' ( '[' prop ( ',' prop )+ ']' )? '-' '(' node_id ')' ( '+' annotation ( ',' annotation )+ )?
node_id  ::= STRING
node_label
         ::= STRING
prop
         ::= key ':' value         
edge_id   ::= STRING
edge_label
         ::= STRING
key      ::= STRING
value    ::= primitive_value
           | complex_value
primitive_value
         ::= STRING
           | NUMBER
           | 'null'
           | BOOL
complex_value
         ::= set_bag
           | list
           | struct
set_bag ::= '{' ( primitive_value | set_bag ) ( ',' ( primitive_value | set_bag ) )* '}'
list     ::= '[' ( primitive_value | list ) ( ',' ( primitive_value | list ) )* ']'
struct     ::= '{' key ':' ( primitive_value | struct ) ( ',' key ':' ( primitive_value | struct ) )* '}'
node_schema
         ::= 'S' ( '{' node_label ( ',' node_label )+ '}' )? ( '[' prop_schema ( ',' prop_schema )+ ']' )? ( '+' annotation ( ',' annotation )+ )?
prop_schema
         ::= key ':' value_schema
value_schema
         ::= primitive_value_schema
           | complex_value_schema
primitive_value_schema
         ::= 'String'
           | 'Number'
           | 'Null'
           | 'Bool'
complex_value_schema
         ::= set_bag_schema
           | list_schema
           | struct_schema
set_bag_schema
         ::= bag_schema
           | set_schema
bag_schema
         ::= 'Bag' '(' ( primitive_value_schema | bag_schema ) ')'
set_schema
         ::= 'Set' '(' ( primitive_value_schema | set_schema ) ')'
list_schema
         ::= 'List' '(' ( primitive_value_schema | list_schema ) ')'
struct_schema
         ::= 'struct' '(' ( primitive_value_schema | struct_schema ) ')'
edge_schema
         ::= directed_schema
           | undirected_schema
directed_schema
         ::= 'S' ( '(' node_label ')' )? '-' '{' edge_label '}' ( '[' prop_schema ( ',' prop_schema )+ ']' )? '->' ( '(' node_label ( ',' node_label )* ')' )?
undirected_schema
         ::= 'S' ( '(' node_label ')' )? '-' '{' edge_label '}' ( '[' prop_schema ( ',' prop_schema )+ ']' )? '-' ( '(' node_label ( ',' node_label )* ')' )?
prop_schema
         ::= key ':' value_schema
_        ::= COMMENT
           | WS
          /* ws: definition */

<?TOKENS?>

COMMENT  ::= '#' [^#xd#xa#xc]*
STRING   ::= STRING_LITERAL_QUOTE
NUMBER   ::= [0-9]+ '.'? [0-9]*
BOOL     ::= 'true'
           | 'false'
STRING_LITERAL_QUOTE
         ::= '"' ( [^"\#xd#xa] | "'" | '\"' )* '"'
ALNUM_PLUS
         ::= PN_CHARS_BASE ( ( PN_CHARS | '.' )* PN_CHARS )?
IRI  ::= '<' ( PN_CHARS | '.' | ':' | '/' | '\' | '#' | '@' | '%' | '&' | UCHAR )* '>'
PN_CHARS ::= PN_CHARS_U
           | [-0-9#xB7#x0300-#x036F#x203F-#x2040]
PN_CHARS_U
         ::= PN_CHARS_BASE
           | '_'
UCHAR    ::= ( '\u' | '\U' HEX HEX HEX HEX ) HEX HEX HEX HEX
PN_CHARS_BASE
         ::= [A-Za-z0-9#xC0-#xD6#xD8-#xF6#xF8-#x2FF#x370-#x37D#x37F-#x1FFF#x200C-#x200D#x2070-#x218F#x2C00-#x2FEF#x3001-#xD7FF#xF900-#xFDCF#xFDF0-#xFFFD]
HEX      ::= [0-9A-Fa-f]
WS       ::= [ #x9#xa#xd]+
EOF      ::= $
    </pre>
</section>
<section class="informative" id='parsers'>
    <h2>Parsers</h2>
</section>
</body>
</html>

